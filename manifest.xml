<?xml version="1.0" encoding="utf-8"?>
<manifest
    xmlns="http://www.w7.cc" versionCode="">
    <application setting='false'>
        <name>
            <![CDATA[哈哈搬家]]>
        </name>
        <identifie>
            <![CDATA[hello_banbanjia]]>
        </identifie>
        <version>
            <![CDATA[1.0.0]]>
        </version>
        <ability>
            <![CDATA[xxx]]>
        </ability>
        <type>
            <![CDATA[]]>
        </type>
        <description>
            <![CDATA[一个搬家平台]]>
        </description>
        <author>
            <![CDATA[hellorobot]]>
        </author>
        <url>
            <![CDATA[]]>
        </url>
        <setting>
            <![CDATA[]]>
        </setting>
    </application>
    <platform>
        <rule embed="false" />
        <rule embed="false" />
        <supports>
            <item type="app" />
        </supports>
    </platform>
    <bindings>
        <menu>
            <entry title="后台管理" do="web" state="" direct="false"/>
            <entry title="测试" do="test" state="" direct="false"/>
        </menu>
    </bindings>
    <install>
        <![CDATA[
    CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_members`(
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) unsigned NOT NULL DEFAULT '0',
            `uid` int(10) unsigned NOT NULL DEFAULT '0',
            `openid` varchar(50) NOT NULL,
            `avatar` varchar(255) NOT NULL,
            `nickname` varchar(50) NOT NULL,
            `sex` varchar(5) NOT NULL,
            `realname` varchar(20) NOT NULL,
            `mobile` varchar(20) NOT NULL,
            `setmeal_id` int(10) unsigned NOT NULL DEFAULT '0',
            `setmeal_day_free_limit` tinyint(3) unsigned NOT NULL DEFAULT '0',
            `setmeal_starttime` int(10) unsigned NOT NULL DEFAULT '0',
            `setmeal_endtime` int(10) unsigned NOT NULL DEFAULT '0',
            `success_num` int(10) unsigned DEFAULT '0',
            `success_price` decimal(10,2) NOT NULL DEFAULT '0.00',
            `cancel_num` int(10) unsigned NOT NULL DEFAULT '0',
            `cancel_price` decimal(10,2) NOT NULL DEFAULT '0.00',
            `is_sys` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '1:系统会员, 2:模块兼容会员',
            `search_data` varchar(255) NOT NULL,
            `addtime` int(10) unsigned NOT NULL DEFAULT '0',
            `mobile_audit` tinyint(3) unsigned NOT NULL DEFAULT '0',
            `salt` varchar(10) NOT NULL,
            `password` varchar(32) NOT NULL,
            `token` varchar(50) NOT NULL,
            `openid_wxapp` varchar(50) NOT NULL,
            `openid_wx` varchar(50) NOT NULL,
            `credit1` decimal(10,2) unsigned NOT NULL DEFAULT '0.00',
            `credit2` decimal(10,2) unsigned NOT NULL DEFAULT '0.00',
            `register_type` varchar(20) NOT NULL DEFAULT 'wechat',
            `success_first_time` int(10) unsigned NOT NULL DEFAULT '0',
            `success_last_time` int(10) unsigned NOT NULL DEFAULT '0',
            `cancel_first_time` int(10) unsigned NOT NULL DEFAULT '0',
            `cancel_last_time` int(10) unsigned NOT NULL DEFAULT '0',
            `status` tinyint(3) unsigned NOT NULL DEFAULT '1',
            `is_spread` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '是否是推广员',
            `spreadtime` int(10) unsigned NOT NULL DEFAULT '0' COMMENT '成为推广员的时间',
            `unionId` varchar(50) NOT NULL,
            `spreadcredit2` decimal(10,2) unsigned NOT NULL DEFAULT '0.00',
            `groupid` int(10) unsigned NOT NULL DEFAULT '0',
            `spread1` int(10) unsigned NOT NULL DEFAULT '0',
            `spread2` int(10) unsigned NOT NULL DEFAULT '0',
            `spreadfixed` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '上线是否已经固定',
            `spread_groupid` int(10) unsigned NOT NULL DEFAULT '0',
            `spread_status` int(10) unsigned NOT NULL DEFAULT '0',
            `groupid_updatetime` int(10) unsigned NOT NULL DEFAULT '0',
            `spread_groupid_change_from` varchar(10) NOT NULL DEFAULT 'system',
            `setmeal_deliveryfee_free_limit` int(10) unsigned NOT NULL DEFAULT '0',
            `svip_status` tinyint(3) unsigned NOT NULL DEFAULT '0',
            `svip_starttime` int(10) unsigned NOT NULL DEFAULT '0',
            `svip_endtime` int(10) unsigned NOT NULL DEFAULT '0',
            `svip_credit1` decimal(10,2) unsigned NOT NULL DEFAULT '0.00',
            `account` varchar(2000) NOT NULL COMMENT '提现账户信息',
            PRIMARY KEY(`id`)
         ) ENGINE=MyISAM AUTO_INCREMENT=100 DEFAULT CHARSET=utf8;
         
        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_plugin`(
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `name` varchar(100) NOT NULL,
            `type` varchar(20) NOT NULL DEFAULT '',
            `title` varchar(100) NOT NULL,
            `thumb` varchar(255) DEFAULT '',
            `version` varchar(10) NOT NULL DEFAULT '',
            `ability` varchar(255) NOT NULL,
            `status` int(10) DEFAULT '0',
            `displayorder` tinyint(3) unsigned NOT NULL DEFAULT '0',
            `is_show` tinyint(3) unsigned NOT NULL DEFAULT '1',
            PRIMARY KEY (`id`),
            KEY `name` (`name`)
        ) ENGINE=MyISAM AUTO_INCREMENT=50 DEFAULT CHARSET=utf8;
        
        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_config`(
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) unsigned NOT NULL DEFAULT '0',
            `sysset` text NOT NULL,
            `pluginset` text NOT NULL,
            `siteroot` varchar(1000) NOT NULL,
            `time` varchar(100) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`)
        ) ENGINE=MyISAM AUTO_INCREMENT=50000 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_operate_log` (
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) NOT NULL DEFAULT '0',
            `username` varchar(50) NOT NULL,
            `uid` int(10) NOT NULL DEFAULT '0',
            `role` varchar(20) NOT NULL,
            `type` smallint(5) unsigned NOT NULL DEFAULT '0',
            `content` varchar(500) NOT NULL,
            `ip` varchar(20) NOT NULL,
            `address` varchar(50) NOT NULL,
            `source` varchar(20) NOT NULL,
            `addtime` int(10) unsigned NOT NULL DEFAULT '0',
            PRIMARY KEY (`id`)
        ) ENGINE=MyISAM AUTO_INCREMENT=500 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_slide`(
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) unsigned NOT NULL DEFAULT '0',
            `title` varchar(30) NOT NULL,
            `thumb` varchar(255) NOT NULL,
            `link` varchar(255) NOT NULL,
            `type` varchar(20) NOT NULL DEFAULT 'homeTop',
            `status` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '是否显示：1显示，0不显示',
            `displayorder` tinyint(3) unsigned NOT NULL DEFAULT '0' COMMENT '排序',
            `wxapp_link` varchar(255) NOT NULL COMMENT '跳转微信小程序链接',
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`)
        ) ENGINE=MyISAM AUTO_INCREMENT=100 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_diypage`(
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) unsigned NOT NULL DEFAULT '0',
            `type` tinyint(3) unsigned NOT NULL DEFAULT '0',
            `name` varchar(255) NOT NULL DEFAULT '',
            `data` longtext NOT NULL,
            `addtime` int(10) unsigned NOT NULL DEFAULT '0',
            `updatetime` int(10) unsigned NOT NULL DEFAULT '0',
            `diymenu` int(10) unsigned NOT NULL DEFAULT '0',
            `version` tinyint(3) unsigned NOT NULL DEFAULT '1',
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`),
            KEY `type` (`type`),
            KEY `addtime` (`addtime`),
            KEY `version` (`version`)
        ) ENGINE=MyISAM AUTO_INCREMENT=60 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_permit_role`(
            `id` int(10) NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) NOT NULL DEFAULT '0',
            `rolename` varchar(255) NOT NULL DEFAULT '',
            `status` tinyint(3) NOT NULL DEFAULT '0',
            `permits` text NOT NULL,
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`)
        ) ENGINE=MyISAM AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_permit_user` (
            `id` int(10) NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) NOT NULL DEFAULT '0',
            `uid` int(10) NOT NULL DEFAULT '0',
            `roleid` int(10) NOT NULL DEFAULT '0',
            `status` tinyint(3) NOT NULL DEFAULT '0',
            `permits` text NOT NULL,
            `realname` varchar(255) NOT NULL DEFAULT '',
            `mobile` varchar(255) NOT NULL DEFAULT '',
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`),
            KEY `uid` (`uid`),
            key `roleid` (`roleid`)
        ) ENGINE=MyISAM AUTO_INCREMENT=10 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_store` (
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) unsigned NOT NULL DEFAULT '0',
            `cid` varchar(50) NOT NULL,
            `title` varchar(30) NOT NULL,
            `logo` varchar(100) NOT NULL,
            `telephone` varchar(15) NOT NULL,
            `business_hours` varchar(200) NOT NULL,
            `is_in_business` tinyint(3) unsigned NOT NULL  DEFAULT '1',
            `description` text NOT NULL,
            `thumbs` varchar(1000) NOT NULL,
            `address` varchar(50) NOT NULL,
            `location_x` varchar(15) NOT NULL,
            `location_y` varchar(15) NOT NULL,
            `status` tinyint(3) unsigned NOT NULL DEFAULT '1',
            `displayorder` int(10) unsigned NOT NULL DEFAULT '0',
            `content` varchar(255) NOT NULL,
            `payment` varchar(255) NOT NULL,
            `score` varchar(10) NOT NULL COMMENT '评分',
            `addtype` tinyint(3) unsigned NOT NULL DEFAULT '1' COMMENT '1:后台添加，2:申请入驻',
            `addtime` int(10) unsigned NOT NULL DEFAULT '0',
            `data` text NOT NULL,
            `deltime` int(10) unsigned NOT NULL DEFAULT '0',
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`),
            KEY `title` (`title`)
        ) ENGINE=MyISAM AUTO_INCREMENT=1500 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_clerk` (
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) unsigned NOT NULL DEFAULT '0',
            `title` varchar(15) NOT NULL,
            `nickname` varchar(15) NOT NULL,
            `openid` varchar(60) NOT NULL,
            `mobile` varchar(20) NOT NULL,
            `password` varchar(32) NOT NULL,
            `salt` varchar(6) NOT NULL,
            `status` tinyint(3) unsigned NOT NULL DEFAULT '1',
            `addtime` int(10) unsigned NOT NULL DEFAULT '0',
            `updatetime` int(10) unsigned NOT NULL DEFAULT '0',
            `avatar` varchar(255) NOT NULL,
            `token` varchar(50) NOT NULL,
            `openid_wxapp` varchar(60) NOT NULL,
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`),
            KEY `status` (`status`)
        ) ENGINE=MyISAM AUTO_INCREMENT=100 DEFAULT CHARSET=utf8;

        CREATE TABLE IF NOT EXISTS `ims_hello_banbanjia_store_clerk` (
            `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
            `uniacid` int(10) unsigned NOT NULL DEFAULT '0',
            `sid` int(10) unsigned NOT NULL DEFAULT '0',
            `clerk_id` int(10) unsigned NOT NULL DEFAULT '0',
            `role` varchar(20) NOT NULL,
            `extra` varchar(500) NOT NULL,
            `addtime` int(10) unsigned NOT NULL DEFAULT '0',
            PRIMARY KEY (`id`),
            KEY `uniacid` (`uniacid`),
            KEY `sid` (`sid`),
            KEY `clerk_id` (`clerk_id`)
        ) ENGINE=MyISAM AUTO_INCREMENT=600 DEFAULT CHARSET=utf8;

        INSERT INTO ims_hello_banbanjia_plugin VALUES
        ('40','wxapp','biz','搬搬家','../addons/hello_banbanjia/static/img/plugin/wxapp.jpg','','搬搬家，国内一流搬家平台','1','0','1');
        INSERT INTO ims_hello_banbanjia_plugin VALUES 
        ('41','diypage','biz','平台装修','../addons/hello_banbanjia/static/img/plugin/diypage.jpg','','可自定义底部菜单，自定义页面等','1','0','1');
        ]]>
    </install>
    <uninstall>
        <![CDATA[]]>
    </uninstall>
    <upgrade>
        <![CDATA[DROP TABLE IF EXISTS `ims_hello_banbanjia_members`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_plugin`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_config`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_slide`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_diypage`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_permit_role`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_permit_user`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_store`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_clerk`;
        DROP TABLE IF EXISTS `ims_hello_banbanjia_store_clerk`;
        ]]>
    </upgrade>
</manifest>